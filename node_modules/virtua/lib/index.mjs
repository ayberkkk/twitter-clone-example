"use client";
import{jsx as e}from"react/jsx-runtime";import{useLayoutEffect as t,useEffect as n,useRef as r,useState as o,forwardRef as s,useMemo as i,memo as l,useImperativeHandle as c}from"react";import{flushSync as u}from"react-dom";const a=Math.min,d=Math.max,h=Math.abs,f=Date.now,_=Object.values,w=Array.isArray,g=setTimeout,m=(e,t,n)=>a(n,d(t,e)),p=e=>null!=e,v=(e,t)=>{let n;const r=()=>{p(n)&&clearTimeout(n)},o=()=>{r(),n=g((()=>{n=null,e()}),t)};return o.t=r,o},b=e=>{let t,n;return(...r)=>(t||(t=!0,n=e(...r)),n)},S=e=>getComputedStyle(e),I=e=>e?parseFloat(e):0,z=-1,R=(e,t)=>{const n=e.o[t];return n===z?e.i:n},y=(e,t)=>{if(!e.l)return 0;if(e.u>=t)return e.h[t];let n=e.u,r=e.h[n];for(;n<t;)r+=R(e,n),e.h[++n]=r;return e.u=t,r},x=(e,t,n)=>{let r=y(e,n);for(;n>=0&&n<e.l;)if(r<=t){const o=R(e,n);if(r+o>t)break;r+=o,n++}else r-=R(e,--n);return m(n,0,e.l-1)},k=(e,t,n,r)=>{const o=x(e,t,a(n,e.l-1));return[o,x(e,t+r,o)]},O=(e,t,n)=>{const r=n?"unshift":"push";for(let n=e.l;n<t;n++)e.o[r](z),e.h.push(0===n?0:z);e.l=t},C=(e,t,n)=>{const r=t-e.l,o=r<0;let s;return o?(s=(n?e.o.splice(0,-r):e.o.splice(r)).reduce(((t,n)=>t+(n===z?e.i:n)),0),e.h.splice(r)):(s=e.i*r,O(e,e.l+r,n)),e.u=n?0:m(t-1,0,e.u),e.l=t,[s,o]},T=(e,t,n)=>t.reduce(((t,[r,o])=>{const s=o-R(e,r);return(!n||s>0)&&(t+=s),t}),0),M=(e,t,n=40,r=0,o=((e,t)=>{const n={i:t,l:0,u:0,o:[],h:[]};return O(n,e),n})(t,n),s,i)=>{let l=n*d(r-1,0),c=0,u=0,f=0,_=0,w=!1,g=!1,p=!1,v=[0,r];const b=new Set,S=()=>(e=>e.l?y(e,e.l-1)+R(e,e.l-1):0)(o),I=()=>S()-l,x=e=>m(e,0,I()),M=e=>{const t=_;return _=e,_!==t};return{_:()=>JSON.parse(JSON.stringify(o)),g(){const[e,t]=v,[n,r]=k(o,c,e,l);return e===n&&t===r?v:v=[n,r]},m:e=>o.o[e]===z,p(e){const[t,n]=k(o,e,v[0],l);return((e,t,n)=>e.o.slice(d(0,t-1),a(e.l-1,n+1)+1).includes(z))(o,t,n)},v(e){const t=y(o,e);return s?t+d(0,l-S()):t},S:e=>R(o,e),I:()=>o.l,R:()=>c,k:I,O:()=>_,C:()=>l,T:()=>d(S(),l),M:()=>u,H(){const e=f;return f=0,e},J(e,t){const n=[e,t];return b.add(n),()=>{b.delete(n)}},W(t,n){let r,s=0;switch(t){case 1:{const e=n.filter((([e,t])=>o.o[e]!==t));if(!e.length)break;let t=0;if(w||g){const[n]=v;0===c||(t=c>I()-1.5?T(o,e,!0):T(o,e.filter((([e])=>e<n))))}else 2===_&&(t=T(o,e));t&&(f=t,u++,s+=4);let l=!1;e.forEach((([e,t])=>{((e,t,n)=>{const r=e.o[t]===z;return e.o[t]=n,e.u=a(t,e.u),r})(o,e,t)&&(l=!0)})),i&&l&&!c&&(e=>{const t=e.o.filter((e=>e!==z)),n=t[0];e.i=t.every((e=>e===n))?n:(e=>{const t=[...e].sort(((e,t)=>e-t)),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(t)})(o),s+=2,p=r=!0;break}case 2:l!==n&&(l=n,s=2);break;case 3:if(n[1]){const e=I()-c,[t,r]=C(o,n[0],!0),i=r?-a(t,e):t;f+=i,c=x(c+i),u++,s=5,w=!0}else C(o,n[0]);break;case 4:case 5:if(c===n)break;if(4===t){const e=n-c,t=p;p=!1,0!==_&&t||g||M(e<0?2:1)&&(s+=8),r=h(e)>l,s+=16,t||(w=!1)}c=x(n),s+=1;break;case 6:M(0)&&(s=8),w=g=!1;break;case 7:g=!0}if(s){const t=()=>{b.forEach((([e,t])=>{s&e&&t()}))};r?e(t):t()}}}},H="undefined"!=typeof window?t:n,J="current",W={},L=(e,t)=>{if(w(e))for(const n of e)L(n,t);else p(e)&&"boolean"!=typeof e&&t.push(e)},$=e=>{const t=[];return L(e,t),t},B=(e,t,n)=>d(e-(1===n?1:d(1,t)),0),j=(e,t,n,r)=>a(e+(2===n?1:d(1,t)),r-1),D=e=>{const t=r(e);return H((()=>{t[J]=e}),[e]),t},N=(e,t,n,r)=>{const[s,i]=o(t),l=D(t);if(H((()=>e.J(n,(()=>{i((()=>l[J]()))}))),[]),r){const e=t();s!==e&&i(e)}return s},U=/*#__PURE__*/b((e=>{const t="scrollLeft",n=e[t];e[t]=1;const r=e[t]<1;return e[t]=n,r})),V=(e,t,n)=>(()=>{let r=f()-50;return(...o)=>{const s=f();r+50<s&&(r=s,(r=>{if(0!==e.O()&&!r.ctrlKey&&(t?r.deltaX:r.deltaY)){const t=e.R();t>0&&t<e.k()&&n()}})(...o))}})(),A=(e,t,n)=>{let r,o;const s=t?"scrollLeft":"scrollTop",i=(o,s)=>t&&n?U(r)||s?-o:e.k()-o:o,l=async t=>{if(!r)return;const n=()=>m(t(),0,e.k());for(;;){const t=n();if(e.W(5,t),!e.p(t))break;o&&o[1]();const r=e.J(2,(()=>{o&&o[0]()}));try{await new Promise(((e,t)=>{let n=!1;const r=()=>{n||(n=!0,e(),o=void 0)};o=[r,t],g(r,250)}))}catch(e){return}finally{r()}}r[s]=i(n()),e.W(7)};return{L(n){r=n;const o=()=>{e.W(4,i(n[s]))},l=v((()=>{o(),e.W(6)}),150),c=()=>{o(),l()},u=V(e,t,l);return n.addEventListener("scroll",c),n.addEventListener("wheel",u,{passive:!0}),()=>{n.removeEventListener("scroll",c),n.removeEventListener("wheel",u),l.t()}},$(e){l((()=>e))},B(t){t+=e.R(),l((()=>t))},j(t,n){t=m(t,0,e.I()-1),l("end"===n?()=>e.v(t)+e.S(t)-e.C():()=>e.v(t))},D:e=>{r&&(r[s]+=i(e,!0))}}},E=(e,t)=>{const n=t?"scrollX":"scrollY",r=t?"offsetLeft":"offsetTop";return{L(o){let s=!1;const i=(e,t)=>{const n=t+e[r],o=e.offsetParent;return e!==document.body&&o?i(o,n):n},l=()=>{s&&e.W(4,window[n]-i(o,0))},c=v((()=>{l(),e.W(6)}),150),u=()=>{l(),c()},a=V(e,t,c),d=new IntersectionObserver((([e])=>{s=e.isIntersecting}));return d.observe(o),window.addEventListener("scroll",u),window.addEventListener("wheel",a,{passive:!0}),()=>{d.disconnect(),window.removeEventListener("scroll",u),window.removeEventListener("wheel",a),c.t()}},D:e=>{window.scrollBy(t?e:0,t?0:e)}}},F=e=>{const t=r();return t[J]||(t[J]=e())},P={box:"border-box"},X=(e,t)=>{let n;const r=t?"width":"height",o=new WeakMap,s=b((()=>new ResizeObserver((s=>{const i=[];for(const{target:l,contentRect:c}of s)if(l.offsetParent)if(l===n)e.W(2,c[r]+c[t?"left":"top"]+I(S(n)[t?"paddingRight":"paddingBottom"]));else{const e=o.get(l);p(e)&&i.push([e,c[r]])}i.length&&e.W(1,i)}))));return{N(e){n=e;const t=s();return t.observe(e,P),()=>{t.disconnect()}},U(e,t){const n=s();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}}}},Y=(e,t)=>{const n=t?"width":"height",r=t?"innerWidth":"innerHeight",o=new WeakMap,s=b((()=>new ResizeObserver((t=>{const r=[];for(const{target:e,contentRect:s}of t){if(!e.offsetParent)continue;const t=o.get(e);p(t)&&r.push([t,s[n]])}r.length&&e.W(1,r)}))));return{N(){const t=()=>{e.W(2,window[r])};return window.addEventListener("resize",t),t(),()=>{window.removeEventListener("resize",t),s().disconnect()}},U(e,t){const n=s();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}}}},q=(e,t)=>{let n;const r="height",o="width",s=new WeakMap,i=new Set,l=new Set,c=new Map,u=(e,t)=>`${e}-${t}`,a=b((()=>new ResizeObserver((a=>{const h=new Set,f=new Set;for(const{target:i,contentRect:l}of a)if(i.offsetParent)if(i===n){const s=S(n);e.W(2,l[r]+l.top+I(s.paddingBottom)),t.W(2,l[o]+l.left+I(s.paddingRight))}else{const e=s.get(i);if(e){const[t,n]=e,s=u(t,n),i=c.get(s),a=[l[r],l[o]];let d,_;i?(i[0]!==a[0]&&(d=!0),i[1]!==a[1]&&(_=!0)):d=_=!0,d&&h.add(t),_&&f.add(n),(d||_)&&c.set(s,a)}}if(h.size){const t=[];h.forEach((e=>{let n=0;l.forEach((t=>{const r=c.get(u(e,t));r&&(n=d(n,r[0]))})),n&&t.push([e,n])})),e.W(1,t)}if(f.size){const e=[];f.forEach((t=>{let n=0;i.forEach((e=>{const r=c.get(u(e,t));r&&(n=d(n,r[1]))})),n&&e.push([t,n])})),t.W(1,e)}}))));return{N(e){n=e;const t=a();return t.observe(e,P),()=>{t.disconnect()}},U(e,t,n){const r=a();return s.set(e,[t,n]),i.add(t),l.add(n),r.observe(e),()=>{s.delete(e),r.unobserve(e)}}}},G=/*#__PURE__*/s((({children:t,attrs:n,width:r,height:o,scrolling:s},l)=>e("div",{ref:l,...n,children:e("div",{style:i((()=>({position:"relative",visibility:"hidden",width:null!=r?r:"100%",height:null!=o?o:"100%",pointerEvents:s?"none":"auto"})),[r,o,s]),children:t})}))),K=/*#__PURE__*/l((({V:t,A:n,F:o,P:s,X:l,Y:c,q:u})=>{const a=r(null),d=N(o,(()=>o.v(s)),2,!0),h=N(o,(()=>o.m(s)),2,!0);return H((()=>n.U(a[J],s)),[s]),e(l,{ref:a,style:i((()=>{const e=u?"right":"left",t={margin:0,padding:0,position:"absolute",[c?"height":"width"]:"100%",[c?"top":e]:0,[c?e:"top"]:d,visibility:h?"hidden":"visible"};return c&&(t.display="flex"),t}),[d,h]),children:t})})),Q=/*#__PURE__*/s((({children:t,overscan:o=4,initialItemSize:s,initialItemCount:l,shift:a,horizontal:d,mode:h,cache:f,components:{Root:w=G,Item:g="div"}=W,onScroll:m,onScrollStop:v,onRangeChange:b,...S},I)=>{const z=i((()=>$(t)),[t]),R=z.length,y=D(m),x=D(v),[k,O,C,T,L]=F((()=>{const e=!!d,t="rtl"===h,n=M(u,R,s,l,f,"reverse"===h,!s);return[n,X(n,e),A(n,e,t),e,t]}));R!==k.I()&&k.W(3,[R,a]);const[U,V]=N(k,k.g,3),E=N(k,k.O,8),P=N(k,k.M,4),Y=N(k,k.T,2,!0),q=r(null),Q=0!==E;H((()=>{const e=q[J],t=O.N(e),n=C.L(e),r=k.J(16,(()=>{y[J]&&y[J](k.R())}));return()=>{t(),n(),r()}}),[]),H((()=>{const e=k.H();e&&C.D(e)}),[P]),n((()=>{Q||x[J]&&x[J]()}),[Q]),n((()=>{b&&b(U,V)}),[U,V]),c(I,(()=>({get cache(){return k._()},get scrollOffset(){return k.R()},get scrollSize(){return k.T()},get viewportSize(){return k.C()},scrollToIndex:C.j,scrollTo:C.$,scrollBy:C.B})),[]);const Z=B(U,o,E),ee=j(V,o,E,R),te=i((()=>{const t=[];for(let n=Z;n<=ee;n++){const r=z[n],o=r.key;t.push(e(K,{A:O,F:k,P:n,X:g,V:r,Y:T,q:L},p(o)?o:"_"+n))}return t}),[z,Z,ee]);return e(w,{ref:q,width:T?Y:void 0,height:T?void 0:Y,scrolling:Q,attrs:i((()=>({...S,style:{overflow:"auto",display:T?"inline-block":"block",contain:"strict",width:"100%",height:"100%",...S.style}})),_(S)),children:te})})),Z=(e,t)=>`${e}-${t}`,ee=/*#__PURE__*/l((({V:t,A:n,G:o,K:s,Z:l,ee:c,X:u,q:a})=>{const d=r(null),h=N(o,(()=>o.v(l)),2,!0),f=N(s,(()=>s.v(c)),2,!0),_=N(o,(()=>o.m(l)),2,!0),w=N(s,(()=>s.m(c)),2,!0),g=N(o,(()=>o.S(l)),2,!0),m=N(s,(()=>s.S(c)),2,!0);return H((()=>n.U(d[J],l,c)),[c,l]),e(u,{ref:d,style:i((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:h,[a?"right":"left"]:f,visibility:_||w?"hidden":"visible",minHeight:g,minWidth:m})),[h,f,m,g,_,w]),children:t})})),te=/*#__PURE__*/s((({children:t,row:n,col:o,cellHeight:s=40,cellWidth:l=100,overscan:a=2,initialRowCount:d,initialColCount:h,rtl:f,components:{Root:w=G,Cell:g="div"}=W,...m},p)=>{const[v,b,S,I,z,R]=F((()=>{const e=!!f,t=M(u,n,s,d),r=M(u,o,l,h);return[t,r,q(t,r),A(t,!1,e),A(r,!0,e),e]}));n!==v.I()&&v.W(3,[n]),o!==b.I()&&b.W(3,[o]);const[y,x]=N(v,v.g,3),[k,O]=N(b,b.g,3),C=N(v,v.O,8),T=N(b,b.O,8),L=N(v,v.M,4),$=N(b,b.M,4),D=N(v,v.T,2,!0),U=N(b,b.T,2,!0),V=r(null),E=0!==C,P=0!==T;H((()=>{const e=V[J],t=S.N(e),n=I.L(e),r=z.L(e);return()=>{t(),n(),r()}}),[]),H((()=>{const e=v.H();e&&I.D(e)}),[L]),H((()=>{const e=b.H();e&&z.D(e)}),[$]),c(p,(()=>({get scrollOffset(){return[b.R(),v.R()]},get scrollSize(){return[b.T(),v.T()]},get viewportSize(){return[b.C(),v.C()]},scrollToIndex(e,t){z.j(e),I.j(t)},scrollTo(e,t){z.$(e),I.$(t)},scrollBy(e,t){z.B(e),I.B(t)}})),[]);const X=i((()=>{const e=new Map;return(n,r)=>{let o=e.get(Z(n,r));return o||e.set(Z(n,r),o=t({rowIndex:n,colIndex:r})),o}}),[t]),Y=B(y,a,C),K=j(x,a,C,n),Q=B(k,a,T),te=j(O,a,T,o),ne=i((()=>{const t=[];for(let n=Y;n<=K;n++)for(let r=Q;r<=te;r++)t.push(e(ee,{A:S,G:v,K:b,Z:n,ee:r,X:g,V:X(n,r),q:R},Z(n,r)));return t}),[X,Y,K,Q,te]);return e(w,{ref:V,width:U,height:D,scrolling:E||P,attrs:i((()=>({...m,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...m.style}})),_(m)),children:ne})})),ne=/*#__PURE__*/s((({children:t,overscan:o=4,initialItemSize:s,initialItemCount:l,horizontal:a,cache:d,components:{Root:h=G,Item:f="div"}=W,onScrollStop:w,onRangeChange:g,...m},v)=>{const b=i((()=>$(t)),[t]),S=b.length,I=D(w),[z,R,y,x]=F((()=>{const e=!!a,t=M(u,S,s,l,d,!1,!s);return[t,Y(t,e),E(t,e),e]}));S!==z.I()&&z.W(3,[S]);const[k,O]=N(z,z.g,3),C=N(z,z.O,8),T=N(z,z.M,4),L=N(z,z.T,2,!0),U=r(null),V=0!==C;H((()=>{const e=U[J],t=R.N(e),n=y.L(e);return()=>{t(),n()}}),[]),H((()=>{const e=z.H();e&&y.D(e)}),[T]),n((()=>{V||I[J]&&I[J]()}),[V]),n((()=>{g&&g(k,O)}),[k,O]),c(v,(()=>({get cache(){return z._()}})),[]);const A=B(k,o,C),P=j(O,o,C,S),X=i((()=>{const t=[];for(let n=A;n<=P;n++){const r=b[n],o=r.key;t.push(e(K,{A:R,F:z,P:n,X:f,V:r,Y:x,q:!1},p(o)?o:"_"+n))}return t}),[b,A,P]);return e(h,{ref:U,width:x?L:void 0,height:x?void 0:L,scrolling:V,attrs:i((()=>({...m,style:{display:x?"inline-block":"block",width:x?"auto":"100%",height:x?"100%":"auto",...m.style}})),_(m)),children:X})}));export{te as VGrid,Q as VList,ne as WVList};
//# sourceMappingURL=index.mjs.map
