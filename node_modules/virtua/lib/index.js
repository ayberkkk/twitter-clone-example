"use client";
var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");const r=Math.min,o=Math.max,s=Math.abs,i=Date.now,l=Object.values,c=Array.isArray,u=setTimeout,a=(e,t,n)=>r(n,o(t,e)),d=e=>null!=e,h=(e,t)=>{let n;const r=()=>{d(n)&&clearTimeout(n)},o=()=>{r(),n=u((()=>{n=null,e()}),t)};return o.t=r,o},f=e=>{let t,n;return(...r)=>(t||(t=!0,n=e(...r)),n)},_=e=>getComputedStyle(e),w=e=>e?parseFloat(e):0,g=-1,p=(e,t)=>{const n=e.o[t];return n===g?e.i:n},m=(e,t)=>{if(!e.l)return 0;if(e.u>=t)return e.h[t];let n=e.u,r=e.h[n];for(;n<t;)r+=p(e,n),e.h[++n]=r;return e.u=t,r},v=(e,t,n)=>{let r=m(e,n);for(;n>=0&&n<e.l;)if(r<=t){const o=p(e,n);if(r+o>t)break;r+=o,n++}else r-=p(e,--n);return a(n,0,e.l-1)},b=(e,t,n,o)=>{const s=v(e,t,r(n,e.l-1));return[s,v(e,t+o,s)]},S=(e,t,n)=>{const r=n?"unshift":"push";for(let n=e.l;n<t;n++)e.o[r](g),e.h.push(0===n?0:g);e.l=t},I=(e,t,n)=>{const r=t-e.l,o=r<0;let s;return o?(s=(n?e.o.splice(0,-r):e.o.splice(r)).reduce(((t,n)=>t+(n===g?e.i:n)),0),e.h.splice(r)):(s=e.i*r,S(e,e.l+r,n)),e.u=n?0:a(t-1,0,e.u),e.l=t,[s,o]},z=(e,t,n)=>t.reduce(((t,[r,o])=>{const s=o-p(e,r);return(!n||s>0)&&(t+=s),t}),0),x=(e,t,n=40,i=0,l=((e,t)=>{const n={i:t,l:0,u:0,o:[],h:[]};return S(n,e),n})(t,n),c,u)=>{let d=n*o(i-1,0),h=0,f=0,_=0,w=0,v=!1,x=!1,R=!1,y=[0,i];const k=new Set,O=()=>(e=>e.l?m(e,e.l-1)+p(e,e.l-1):0)(l),C=()=>O()-d,T=e=>a(e,0,C()),M=e=>{const t=w;return w=e,w!==t};return{_:()=>JSON.parse(JSON.stringify(l)),g(){const[e,t]=y,[n,r]=b(l,h,e,d);return e===n&&t===r?y:y=[n,r]},p:e=>l.o[e]===g,m(e){const[t,n]=b(l,e,y[0],d);return((e,t,n)=>e.o.slice(o(0,t-1),r(e.l-1,n+1)+1).includes(g))(l,t,n)},v(e){const t=m(l,e);return c?t+o(0,d-O()):t},S:e=>p(l,e),I:()=>l.l,R:()=>h,k:C,O:()=>w,C:()=>d,T:()=>o(O(),d),M:()=>f,H(){const e=_;return _=0,e},J(e,t){const n=[e,t];return k.add(n),()=>{k.delete(n)}},W(t,n){let o,i=0;switch(t){case 1:{const e=n.filter((([e,t])=>l.o[e]!==t));if(!e.length)break;let t=0;if(v||x){const[n]=y;0===h||(t=h>C()-1.5?z(l,e,!0):z(l,e.filter((([e])=>e<n))))}else 2===w&&(t=z(l,e));t&&(_=t,f++,i+=4);let s=!1;e.forEach((([e,t])=>{((e,t,n)=>{const o=e.o[t]===g;return e.o[t]=n,e.u=r(t,e.u),o})(l,e,t)&&(s=!0)})),u&&s&&!h&&(e=>{const t=e.o.filter((e=>e!==g)),n=t[0];e.i=t.every((e=>e===n))?n:(e=>{const t=[...e].sort(((e,t)=>e-t)),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(t)})(l),i+=2,R=o=!0;break}case 2:d!==n&&(d=n,i=2);break;case 3:if(n[1]){const e=C()-h,[t,o]=I(l,n[0],!0),s=o?-r(t,e):t;_+=s,h=T(h+s),f++,i=5,v=!0}else I(l,n[0]);break;case 4:case 5:if(h===n)break;if(4===t){const e=n-h,t=R;R=!1,0!==w&&t||x||M(e<0?2:1)&&(i+=8),o=s(e)>d,i+=16,t||(v=!1)}h=T(n),i+=1;break;case 6:M(0)&&(i=8),v=x=!1;break;case 7:x=!0}if(i){const t=()=>{k.forEach((([e,t])=>{i&e&&t()}))};o?e(t):t()}}}},R="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,y="current",k={},O=(e,t)=>{if(c(e))for(const n of e)O(n,t);else d(e)&&"boolean"!=typeof e&&t.push(e)},C=e=>{const t=[];return O(e,t),t},T=(e,t,n)=>o(e-(1===n?1:o(1,t)),0),M=(e,t,n,s)=>r(e+(2===n?1:o(1,t)),s-1),H=e=>{const n=t.useRef(e);return R((()=>{n[y]=e}),[e]),n},J=(e,n,r,o)=>{const[s,i]=t.useState(n),l=H(n);if(R((()=>e.J(r,(()=>{i((()=>l[y]()))}))),[]),o){const e=n();s!==e&&i(e)}return s},W=/*#__PURE__*/f((e=>{const t="scrollLeft",n=e[t];e[t]=1;const r=e[t]<1;return e[t]=n,r})),L=(e,t,n)=>(()=>{let r=i()-50;return(...o)=>{const s=i();r+50<s&&(r=s,(r=>{if(0!==e.O()&&!r.ctrlKey&&(t?r.deltaX:r.deltaY)){const t=e.R();t>0&&t<e.k()&&n()}})(...o))}})(),$=(e,t,n)=>{let r,o;const s=t?"scrollLeft":"scrollTop",i=(o,s)=>t&&n?W(r)||s?-o:e.k()-o:o,l=async t=>{if(!r)return;const n=()=>a(t(),0,e.k());for(;;){const t=n();if(e.W(5,t),!e.m(t))break;o&&o[1]();const r=e.J(2,(()=>{o&&o[0]()}));try{await new Promise(((e,t)=>{let n=!1;const r=()=>{n||(n=!0,e(),o=void 0)};o=[r,t],u(r,250)}))}catch(e){return}finally{r()}}r[s]=i(n()),e.W(7)};return{L(n){r=n;const o=()=>{e.W(4,i(n[s]))},l=h((()=>{o(),e.W(6)}),150),c=()=>{o(),l()},u=L(e,t,l);return n.addEventListener("scroll",c),n.addEventListener("wheel",u,{passive:!0}),()=>{n.removeEventListener("scroll",c),n.removeEventListener("wheel",u),l.t()}},$(e){l((()=>e))},q(t){t+=e.R(),l((()=>t))},B(t,n){t=a(t,0,e.I()-1),l("end"===n?()=>e.v(t)+e.S(t)-e.C():()=>e.v(t))},j:e=>{r&&(r[s]+=i(e,!0))}}},q=(e,t)=>{const n=t?"scrollX":"scrollY",r=t?"offsetLeft":"offsetTop";return{L(o){let s=!1;const i=(e,t)=>{const n=t+e[r],o=e.offsetParent;return e!==document.body&&o?i(o,n):n},l=()=>{s&&e.W(4,window[n]-i(o,0))},c=h((()=>{l(),e.W(6)}),150),u=()=>{l(),c()},a=L(e,t,c),d=new IntersectionObserver((([e])=>{s=e.isIntersecting}));return d.observe(o),window.addEventListener("scroll",u),window.addEventListener("wheel",a,{passive:!0}),()=>{d.disconnect(),window.removeEventListener("scroll",u),window.removeEventListener("wheel",a),c.t()}},j:e=>{window.scrollBy(t?e:0,t?0:e)}}},B=e=>{const n=t.useRef();return n[y]||(n[y]=e())},j={box:"border-box"},D=(e,t)=>{let n;const r=t?"width":"height",o=new WeakMap,s=f((()=>new ResizeObserver((s=>{const i=[];for(const{target:l,contentRect:c}of s)if(l.offsetParent)if(l===n)e.W(2,c[r]+c[t?"left":"top"]+w(_(n)[t?"paddingRight":"paddingBottom"]));else{const e=o.get(l);d(e)&&i.push([e,c[r]])}i.length&&e.W(1,i)}))));return{D(e){n=e;const t=s();return t.observe(e,j),()=>{t.disconnect()}},N(e,t){const n=s();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}}}},N=(e,t)=>{const n=t?"width":"height",r=t?"innerWidth":"innerHeight",o=new WeakMap,s=f((()=>new ResizeObserver((t=>{const r=[];for(const{target:e,contentRect:s}of t){if(!e.offsetParent)continue;const t=o.get(e);d(t)&&r.push([t,s[n]])}r.length&&e.W(1,r)}))));return{D(){const t=()=>{e.W(2,window[r])};return window.addEventListener("resize",t),t(),()=>{window.removeEventListener("resize",t),s().disconnect()}},N(e,t){const n=s();return o.set(e,t),n.observe(e),()=>{o.delete(e),n.unobserve(e)}}}},U=(e,t)=>{let n;const r="height",s="width",i=new WeakMap,l=new Set,c=new Set,u=new Map,a=(e,t)=>`${e}-${t}`,d=f((()=>new ResizeObserver((d=>{const h=new Set,f=new Set;for(const{target:o,contentRect:l}of d)if(o.offsetParent)if(o===n){const o=_(n);e.W(2,l[r]+l.top+w(o.paddingBottom)),t.W(2,l[s]+l.left+w(o.paddingRight))}else{const e=i.get(o);if(e){const[t,n]=e,o=a(t,n),i=u.get(o),c=[l[r],l[s]];let d,_;i?(i[0]!==c[0]&&(d=!0),i[1]!==c[1]&&(_=!0)):d=_=!0,d&&h.add(t),_&&f.add(n),(d||_)&&u.set(o,c)}}if(h.size){const t=[];h.forEach((e=>{let n=0;c.forEach((t=>{const r=u.get(a(e,t));r&&(n=o(n,r[0]))})),n&&t.push([e,n])})),e.W(1,t)}if(f.size){const e=[];f.forEach((t=>{let n=0;l.forEach((e=>{const r=u.get(a(e,t));r&&(n=o(n,r[1]))})),n&&e.push([t,n])})),t.W(1,e)}}))));return{D(e){n=e;const t=d();return t.observe(e,j),()=>{t.disconnect()}},N(e,t,n){const r=d();return i.set(e,[t,n]),l.add(t),c.add(n),r.observe(e),()=>{i.delete(e),r.unobserve(e)}}}},V=t.forwardRef((({children:n,attrs:r,width:o,height:s,scrolling:i},l)=>e.jsx("div",{ref:l,...r,children:e.jsx("div",{style:t.useMemo((()=>({position:"relative",visibility:"hidden",width:null!=o?o:"100%",height:null!=s?s:"100%",pointerEvents:i?"none":"auto"})),[o,s,i]),children:n})}))),A=t.memo((({U:n,V:r,A:o,F:s,P:i,X:l,Y:c})=>{const u=t.useRef(null),a=J(o,(()=>o.v(s)),2,!0),d=J(o,(()=>o.p(s)),2,!0);return R((()=>r.N(u[y],s)),[s]),e.jsx(i,{ref:u,style:t.useMemo((()=>{const e=c?"right":"left",t={margin:0,padding:0,position:"absolute",[l?"height":"width"]:"100%",[l?"top":e]:0,[l?e:"top"]:a,visibility:d?"hidden":"visible"};return l&&(t.display="flex"),t}),[a,d]),children:n})})),E=t.forwardRef((({children:r,overscan:o=4,initialItemSize:s,initialItemCount:i,shift:c,horizontal:u,mode:a,cache:h,components:{Root:f=V,Item:_="div"}=k,onScroll:w,onScrollStop:g,onRangeChange:p,...m},v)=>{const b=t.useMemo((()=>C(r)),[r]),S=b.length,I=H(w),z=H(g),[O,W,L,q,j]=B((()=>{const e=!!u,t="rtl"===a,r=x(n.flushSync,S,s,i,h,"reverse"===a,!s);return[r,D(r,e),$(r,e,t),e,t]}));S!==O.I()&&O.W(3,[S,c]);const[N,U]=J(O,O.g,3),E=J(O,O.O,8),F=J(O,O.M,4),P=J(O,O.T,2,!0),X=t.useRef(null),Y=0!==E;R((()=>{const e=X[y],t=W.D(e),n=L.L(e),r=O.J(16,(()=>{I[y]&&I[y](O.R())}));return()=>{t(),n(),r()}}),[]),R((()=>{const e=O.H();e&&L.j(e)}),[F]),t.useEffect((()=>{Y||z[y]&&z[y]()}),[Y]),t.useEffect((()=>{p&&p(N,U)}),[N,U]),t.useImperativeHandle(v,(()=>({get cache(){return O._()},get scrollOffset(){return O.R()},get scrollSize(){return O.T()},get viewportSize(){return O.C()},scrollToIndex:L.B,scrollTo:L.$,scrollBy:L.q})),[]);const G=T(N,o,E),K=M(U,o,E,S),Q=t.useMemo((()=>{const t=[];for(let n=G;n<=K;n++){const r=b[n],o=r.key;t.push(e.jsx(A,{V:W,A:O,F:n,P:_,U:r,X:q,Y:j},d(o)?o:"_"+n))}return t}),[b,G,K]);return e.jsx(f,{ref:X,width:q?P:void 0,height:q?void 0:P,scrolling:Y,attrs:t.useMemo((()=>({...m,style:{overflow:"auto",display:q?"inline-block":"block",contain:"strict",width:"100%",height:"100%",...m.style}})),l(m)),children:Q})})),F=(e,t)=>`${e}-${t}`,P=t.memo((({U:n,V:r,G:o,K:s,Z:i,ee:l,P:c,Y:u})=>{const a=t.useRef(null),d=J(o,(()=>o.v(i)),2,!0),h=J(s,(()=>s.v(l)),2,!0),f=J(o,(()=>o.p(i)),2,!0),_=J(s,(()=>s.p(l)),2,!0),w=J(o,(()=>o.S(i)),2,!0),g=J(s,(()=>s.S(l)),2,!0);return R((()=>r.N(a[y],i,l)),[l,i]),e.jsx(c,{ref:a,style:t.useMemo((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:d,[u?"right":"left"]:h,visibility:f||_?"hidden":"visible",minHeight:w,minWidth:g})),[d,h,g,w,f,_]),children:n})})),X=t.forwardRef((({children:r,row:o,col:s,cellHeight:i=40,cellWidth:c=100,overscan:u=2,initialRowCount:a,initialColCount:d,rtl:h,components:{Root:f=V,Cell:_="div"}=k,...w},g)=>{const[p,m,v,b,S,I]=B((()=>{const e=!!h,t=x(n.flushSync,o,i,a),r=x(n.flushSync,s,c,d);return[t,r,U(t,r),$(t,!1,e),$(r,!0,e),e]}));o!==p.I()&&p.W(3,[o]),s!==m.I()&&m.W(3,[s]);const[z,O]=J(p,p.g,3),[C,H]=J(m,m.g,3),W=J(p,p.O,8),L=J(m,m.O,8),q=J(p,p.M,4),j=J(m,m.M,4),D=J(p,p.T,2,!0),N=J(m,m.T,2,!0),A=t.useRef(null),E=0!==W,X=0!==L;R((()=>{const e=A[y],t=v.D(e),n=b.L(e),r=S.L(e);return()=>{t(),n(),r()}}),[]),R((()=>{const e=p.H();e&&b.j(e)}),[q]),R((()=>{const e=m.H();e&&S.j(e)}),[j]),t.useImperativeHandle(g,(()=>({get scrollOffset(){return[m.R(),p.R()]},get scrollSize(){return[m.T(),p.T()]},get viewportSize(){return[m.C(),p.C()]},scrollToIndex(e,t){S.B(e),b.B(t)},scrollTo(e,t){S.$(e),b.$(t)},scrollBy(e,t){S.q(e),b.q(t)}})),[]);const Y=t.useMemo((()=>{const e=new Map;return(t,n)=>{let o=e.get(F(t,n));return o||e.set(F(t,n),o=r({rowIndex:t,colIndex:n})),o}}),[r]),G=T(z,u,W),K=M(O,u,W,o),Q=T(C,u,L),Z=M(H,u,L,s),ee=t.useMemo((()=>{const t=[];for(let n=G;n<=K;n++)for(let r=Q;r<=Z;r++)t.push(e.jsx(P,{V:v,G:p,K:m,Z:n,ee:r,P:_,U:Y(n,r),Y:I},F(n,r)));return t}),[Y,G,K,Q,Z]);return e.jsx(f,{ref:A,width:N,height:D,scrolling:E||X,attrs:t.useMemo((()=>({...w,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...w.style}})),l(w)),children:ee})})),Y=t.forwardRef((({children:r,overscan:o=4,initialItemSize:s,initialItemCount:i,horizontal:c,cache:u,components:{Root:a=V,Item:h="div"}=k,onScrollStop:f,onRangeChange:_,...w},g)=>{const p=t.useMemo((()=>C(r)),[r]),m=p.length,v=H(f),[b,S,I,z]=B((()=>{const e=!!c,t=x(n.flushSync,m,s,i,u,!1,!s);return[t,N(t,e),q(t,e),e]}));m!==b.I()&&b.W(3,[m]);const[O,W]=J(b,b.g,3),L=J(b,b.O,8),$=J(b,b.M,4),j=J(b,b.T,2,!0),D=t.useRef(null),U=0!==L;R((()=>{const e=D[y],t=S.D(e),n=I.L(e);return()=>{t(),n()}}),[]),R((()=>{const e=b.H();e&&I.j(e)}),[$]),t.useEffect((()=>{U||v[y]&&v[y]()}),[U]),t.useEffect((()=>{_&&_(O,W)}),[O,W]),t.useImperativeHandle(g,(()=>({get cache(){return b._()}})),[]);const E=T(O,o,L),F=M(W,o,L,m),P=t.useMemo((()=>{const t=[];for(let n=E;n<=F;n++){const r=p[n],o=r.key;t.push(e.jsx(A,{V:S,A:b,F:n,P:h,U:r,X:z,Y:!1},d(o)?o:"_"+n))}return t}),[p,E,F]);return e.jsx(a,{ref:D,width:z?j:void 0,height:z?void 0:j,scrolling:U,attrs:t.useMemo((()=>({...w,style:{display:z?"inline-block":"block",width:z?"auto":"100%",height:z?"100%":"auto",...w.style}})),l(w)),children:P})}));exports.VGrid=X,exports.VList=E,exports.WVList=Y;
//# sourceMappingURL=index.js.map
